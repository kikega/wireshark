
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="es">
  <head>
    <meta charset="utf-8" />
    <title>Protocolo DHCP &#8212; documentación de Wireshark - 1</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/estilos.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script type="text/javascript" src="_static/translations.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Índice" href="genindex.html" />
    <link rel="search" title="Búsqueda" href="search.html" />
    <link rel="next" title="Protocolo ARP" href="arp.html" />
    <link rel="prev" title="Protocolo IP" href="ip.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="protocolo-dhcp">
<h1>Protocolo DHCP<a class="headerlink" href="#protocolo-dhcp" title="Enlazar permanentemente con este título">¶</a></h1>
<p><a class="reference external" href="_static/laboratorios/documentacion/rfc/rfc2131-DHCP.pdf">RFC2131 DHCP</a>
<a class="reference external" href="_static/laboratorios/documentacion/rfc/rfc2132-Opciones-DHCP.pdf">RFC2132 Opciones DHCP</a></p>
<div class="section" id="introduccion">
<h2>Introducción<a class="headerlink" href="#introduccion" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Las demandas de conectividad, cambios, movimientos y reconfiguraciones de red, que caracterizan el entorno de red actual, necesitan de mecanismos que permitan automatizar la configuración de nodos y la distribución de sistema operativo y software en la red.</p>
<p>Algunos equipos necesitan pocas variables de configuración antes de arrancar, otros, una lista más detallada, a veces, se necesita descargar el sistema operativo completo. La forma mas efectiva de conseguirlo es configurar un servidor de arranque y guardar los datos de configuración y el software necesario, al inicializarse, las estaciones de red interactúan con el servidor de arranque de donde descargan los parámetros de configuración y el software necesario.</p>
<p>BOOTP fue el primer estándar para el arranque en entornos TCP/IP, ofrece a los dispositivos, todos los parámetros básicos de configuración y la descarga de software.</p>
<p>DHCP, extendió las funciones de BOOTP, automatizando la asignación y protegiendo la configuración de IP contra fallos.</p>
</div>
<div class="section" id="version-inicial-de-bootp">
<h2>Versión inicial de BOOTP<a class="headerlink" href="#version-inicial-de-bootp" title="Enlazar permanentemente con este título">¶</a></h2>
<p>BOOTP se diseño para estaciones de trabajo sin disco, que necesitaban un arranque automático con lo básico, aunque, no se tardo mucho tiempo en incluir parámetros como la mascara de subred, el gateway por defecto, dirección del servidor de descarga TFTP, etc.</p>
<img alt="_images/dhcp-proceso.png" class="align-center" src="_images/dhcp-proceso.png" />
<p>El procedimiento era:</p>
<ul class="simple">
<li><p>Cliente difunde una petición de información en un mensaje UDP</p></li>
<li><p>El servidor de devuelve la dirección IP y los datos necesarios.</p></li>
</ul>
</div>
<div class="section" id="protocolo-bootp">
<h2>Protocolo BOOTP<a class="headerlink" href="#protocolo-bootp" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Es un protocolo simple de pregunta/respuesta, el cliente transmite un mensaje de petición de arranque desde el puerto 68 al puerto 67 del servidor y el servidor, responde con un mensaje de respuesta al puerto 68.</p>
<img alt="_images/cabecera-bootp.png" class="align-center" src="_images/cabecera-bootp.png" />
<ul class="simple">
<li><p>Se utiliza el mismo mensaje para la petición que para la respuesta.</p></li>
<li><p>El tipo de mensaje, indica si es una petición (1) o una respuesta (2).</p></li>
<li><p>El byte de saltos, es unsado por DHCP relay para definir el número de redes que se debe cruzar hasta alcanzar el servidor DHCP.</p></li>
<li><p>El campo Transaction ID se utiliza para hacer coincidir las peticiones con las respuestas.</p></li>
<li><p>El bit mas significativo del campo flags, se utiliza como indicador de broadcast, normalmente, los servidores DHCP intentan transportar los mensajes a un cliente mediante unicast, con la dirección IP asignada y la dirección hardware del cliente y al puerto 68, si un cliente es incapaz de recibir un datagrama unicast hasta que se sepa su dirección IP, se debe activar el bit de broadcast para indicar al servidor que debe enviar la respuesta con la dirección de broadcast.</p></li>
<li><p>La dirección IP del cliente la puede fijar el cliente a irá todo a 0.</p></li>
<li><p>El campo Tu dirección IP, lo fija el servidor si la dirección del cliente es 0.0.0.0</p></li>
</ul>
</div>
<div class="section" id="mejoras-de-dhcp">
<h2>Mejoras de DHCP<a class="headerlink" href="#mejoras-de-dhcp" title="Enlazar permanentemente con este título">¶</a></h2>
<p>DHCP extiende las posibilidades de BOOTP, definido en el RFC 2131, permite</p>
<ul class="simple">
<li><p>Una administración mas sencilla</p></li>
<li><p>Configuración automatizada</p></li>
<li><p>Posibilidad de que el cliente solicite los valores de ciertos parámetros</p></li>
<li><p>Nuevos tipos de mensajes</p></li>
</ul>
<p>Permite tres tipos de asignación</p>
<ul class="simple">
<li><p>Asignación manual, una dirección que ha sido introducida manualmente en el servidor, se asigna permanentemente al cliente</p></li>
<li><p>Asignación automática, se selecciona una dirección IP de las que estan disponibles en el servidor y se asigna permenentemente al cliente</p></li>
<li><p>Asignación dinámica, se asigna una dirección IP durante un tiempo límite. Aparece el concepto de alquiler, que indica el período de tiempo que un cliente puede disponer de una dirección IP.</p></li>
</ul>
<p>En el campo opciones, se define el tipo de mensaje</p>
<img alt="_images/dhcp-msg.png" class="align-center" src="_images/dhcp-msg.png" />
<ul class="simple">
<li><p><strong>DHCPDISCOVER</strong>, el cliente envía este tipo de mensaje para descubrir servidores</p></li>
<li><p><strong>DHCPOFFER</strong>, el servidor responde y envía la configuración IP con sus parámetros</p></li>
<li><p><strong>DHCPREQUEST</strong>, el cliente envía una petición de más parámetros o la renovación de la IP asignada</p></li>
<li><p><strong>DHCPACK</strong>, el servidor esta de acuerdo</p></li>
<li><p><strong>DHCPNACK</strong>, el servidor rehusa la petición</p></li>
<li><p><strong>DHCPINFO</strong>, un cliente configurado de forma estática, puede pedir datos que le falten con este mensaje, el servidor devolverá los parámetros adecuados con DCHPACK.</p></li>
<li><p><strong>DHCPDECLINE</strong>, el cliente rehusa la dirección de red porque no es aceptable (probablemente descubrió que es dirección IP ya estaba signada mediante un ARP gratuito)</p></li>
<li><p><strong>DHCPRELEASE</strong>, el cliente ya no necesita esa dirección IP y la libera.</p></li>
</ul>
</div>
<div class="section" id="tmporizadores">
<h2>Tmporizadores<a class="headerlink" href="#tmporizadores" title="Enlazar permanentemente con este título">¶</a></h2>
<p>En la asignación dinámica, entran en juego tres temporizadores</p>
<ul class="simple">
<li><p><strong>Lease time (LT)</strong>, define cuanto tiempo permite a un cliente usar la dirección asignada</p></li>
<li><p><strong>Renewal time (T1)</strong>, por defecto es 0,5*LT, que una vez superado se envía un DHCPREQUEST por unicast</p></li>
<li><p><strong>Rebind time (T2)</strong>, por defecto es 0,875 * LT, que una vez superado, envía un DHCPREQUEST por multicast, si el cliente tampoco recibe un DHCPACK del servidor, se debe volver al proceso inicial con un DHCPDISCOVER.</p></li>
</ul>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/logo.png" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="index.html">Wireshark</a></h1>








<h3>Navegación</h3>
<p class="caption"><span class="caption-text">Contenido:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduccion.html">Introducción a Wireshark</a></li>
<li class="toctree-l1"><a class="reference internal" href="filtrado.html">Trabajando con los paquetes capturados</a></li>
<li class="toctree-l1"><a class="reference internal" href="ip.html">Protocolo IP</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Protocolo DHCP</a></li>
<li class="toctree-l1"><a class="reference internal" href="arp.html">Protocolo ARP</a></li>
<li class="toctree-l1"><a class="reference internal" href="icmp.html">Protocolo ICMP</a></li>
<li class="toctree-l1"><a class="reference internal" href="tcp.html">Protocolo TCP</a></li>
<li class="toctree-l1"><a class="reference internal" href="sip.html">Protocolo SIP</a></li>
<li class="toctree-l1"><a class="reference internal" href="rtp.html">Protocolo RTP</a></li>
<li class="toctree-l1"><a class="reference internal" href="analyze.html">Menú Analyze</a></li>
<li class="toctree-l1"><a class="reference internal" href="estadisticas.html">Estadísticas en Wireshark</a></li>
</ul>
<p class="caption"><span class="caption-text">Laboratorios:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="lab_interfaz.html">Laboratorios Configuración Introducción a Wireshark</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab_filtrado.html">Laboratorios paquetes capturados</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab_ip.html">Laboratorios arquitectura IP</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab_tcp.html">Laboratorios protocolo TCP</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab_analyze.html">Laboratorio Analyze</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab_estadisticas.html">Laboratorios de estadísticas</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab_voip.html">Laboratorios SIP</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab_aplicaciones.html">Laboratorios Aplicaciones</a></li>
</ul>
<p class="caption"><span class="caption-text">Estudio:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="presentaciones.html">Presentaciones</a></li>
<li class="toctree-l1"><a class="reference internal" href="doc.html">Documentación</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="ip.html" title="capítulo anterior">Protocolo IP</a></li>
      <li>Next: <a href="arp.html" title="próximo capítulo">Protocolo ARP</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Búsqueda rápida</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Ir a" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Kike G.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.2.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/dhcp.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>