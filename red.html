

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="es" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="es" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Configuración de red &mdash; documentación de Wireshark - 1</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script type="text/javascript" src="_static/translations.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/estilos.css" type="text/css" />
    <link rel="index" title="Índice" href="genindex.html" />
    <link rel="search" title="Búsqueda" href="search.html" />
    <link rel="next" title="Comandos para la gestión de red" href="ip-cheatsheet.html" />
    <link rel="prev" title="Redes, Wireshark y entorno Ibercom" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Wireshark
          

          
            
            <img src="_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Linux:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Configuración de red</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#interactuar-con-networkmanager">1. Interactuar con NetworkManager</a></li>
<li class="toctree-l2"><a class="reference internal" href="#networkmanager-y-scripts-de-red">2. NetworkManager y scripts de red</a></li>
<li class="toctree-l2"><a class="reference internal" href="#corriendo-el-script-de-red">3. Corriendo el script de red</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuracion-de-red-usando-archivos-sysconfig">4. Configuración de red usando archivos <em>sysconfig</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="#configurando-la-red">5. Configurando la red</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configurando-con-cli-usando-ifcfg">5.1. Configurando con CLI usando ifcfg</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuracion-estatica">5.2. Configuración estática</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuracion-dinamica">5.3. Configuración dinámica</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configurando-la-red-usando-comandos-ip">5.4. Configurando la red usando comandos IP</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#asignar-una-direccion">5.4.1 Asignar una dirección</a></li>
<li class="toctree-l4"><a class="reference internal" href="#rutas-estaticas-y-router-por-defecto">5.4.2 Rutas estáticas y router por defecto</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configurar-el-router-por-defecto">5.4.3. Configurar el router por defecto</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#usar-nm-comand-line-tool-nmcli">5.5 Usar <strong>NM</strong> Comand Line Tool <strong>nmcli</strong></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#parar-y-arrancar-una-interface-usando-nmcli">5.5.1 Parar y arrancar una interface usando nmcli</a></li>
<li class="toctree-l4"><a class="reference internal" href="#entendiendo-las-opciones-nmcli">5.5.2 Entendiendo las opciones nmcli</a></li>
<li class="toctree-l4"><a class="reference internal" href="#conectando-una-red-usando-nmcli">5.5.3 Conectando una red usando <strong>nmcli</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="#anadiendo-una-conexion-estatica">5.5.4 Añadiendo una conexión estática</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#configurar-rutas-estaticas">5.6 Configurar rutas estáticas</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ip-cheatsheet.html">Comandos para la gestión de red</a></li>
</ul>
<p class="caption"><span class="caption-text">Wireshark:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="introduccion.html">Introducción a Wireshark</a></li>
<li class="toctree-l1"><a class="reference internal" href="filtrado.html">Trabajando con los paquetes capturados</a></li>
<li class="toctree-l1"><a class="reference internal" href="analyze.html">Menú Analyze</a></li>
<li class="toctree-l1"><a class="reference internal" href="estadisticas.html">Estadísticas en Wireshark</a></li>
</ul>
<p class="caption"><span class="caption-text">Protocolos</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="ip.html">Protocolo IP</a></li>
<li class="toctree-l1"><a class="reference internal" href="dhcp.html">Protocolo DHCP</a></li>
<li class="toctree-l1"><a class="reference internal" href="arp.html">Protocolo ARP</a></li>
<li class="toctree-l1"><a class="reference internal" href="icmp.html">Protocolo ICMP</a></li>
<li class="toctree-l1"><a class="reference internal" href="tcp.html">Protocolo TCP</a></li>
<li class="toctree-l1"><a class="reference internal" href="dns.html">Domain Name Server - DNS</a></li>
<li class="toctree-l1"><a class="reference internal" href="sip.html">Protocolo SIP</a></li>
<li class="toctree-l1"><a class="reference internal" href="rtp.html">Protocolo RTP</a></li>
</ul>
<p class="caption"><span class="caption-text">Ibercom IP:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="rpv.html">Servicios de Redes Privadas de Cliente</a></li>
<li class="toctree-l1"><a class="reference internal" href="silan.html">Switching SILAN</a></li>
<li class="toctree-l1"><a class="reference internal" href="ibercom_ip.html">Servicio Ibercom IP</a></li>
</ul>
<p class="caption"><span class="caption-text">Terminales</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="audiocode.html">Configuración Audiocode</a></li>
<li class="toctree-l1"><a class="reference internal" href="dect_ascom.html">Configuración DECT Ascom</a></li>
<li class="toctree-l1"><a class="reference internal" href="gigaset.html">Gigaset IP DECT C530</a></li>
<li class="toctree-l1"><a class="reference internal" href="mediatrix.html">Configuración de Mediatrix</a></li>
<li class="toctree-l1"><a class="reference internal" href="dap_controller.html">IP DECT - DAP Controller</a></li>
<li class="toctree-l1"><a class="reference internal" href="ip_touch.html">Terminales IP TOUCH</a></li>
</ul>
<p class="caption"><span class="caption-text">Laboratorios</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="lab_wireshark.html">Laboratorios Wireshark</a></li>
</ul>
<p class="caption"><span class="caption-text">Estudio:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="presentaciones.html">Presentaciones</a></li>
<li class="toctree-l1"><a class="reference internal" href="doc.html">Documentación</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Wireshark</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Configuración de red</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/red.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="configuracion-de-red">
<h1>Configuración de red<a class="headerlink" href="#configuracion-de-red" title="Enlazar permanentemente con este título">¶</a></h1>
<p>La configuración de red utiliza <strong>NetworkManager</strong> por defecto</p>
<dl class="field-list simple">
<dt class="field-odd">NetworkManager</dt>
<dd class="field-odd"><p>El demonio</p>
</dd>
<dt class="field-even">nmtui</dt>
<dd class="field-even"><p>Interfaz ncurses (no se instala por defecto)</p>
</dd>
<dt class="field-odd">nmcli</dt>
<dd class="field-odd"><p>Interfaz de comando para interactuar con NetworkManager</p>
</dd>
<dt class="field-even">Control-center</dt>
<dd class="field-even"><p>GUI para Gnomme Shell</p>
</dd>
</dl>
<p>NetworkManager puede ser usado para cualkquier tipo de conexión.</p>
<p>El demonio NM corre con privilegios de <strong>root</strong> y por defecto está configurado para iniciarse en el arranque</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>systemctl status NetworkManager
</pre></div>
</div>
<div class="section" id="interactuar-con-networkmanager">
<h2>1. Interactuar con NetworkManager<a class="headerlink" href="#interactuar-con-networkmanager" title="Enlazar permanentemente con este título">¶</a></h2>
<ul class="simple">
<li><p>Una CLI es proporcionada para que usuarios y scripts puedan interactuar con <strong>NM</strong></p></li>
<li><p>Los comandos IP se pueden utilizar para agregar y quitar direcciones y rutas en paralelo con <strong>NM</strong> y serán reconocidos por <strong>nmcli</strong>  y el centro de control, pero no serán persistentes cuando se reinicie el ordenador.</p></li>
</ul>
</div>
<div class="section" id="networkmanager-y-scripts-de-red">
<h2>2. NetworkManager y scripts de red<a class="headerlink" href="#networkmanager-y-scripts-de-red" title="Enlazar permanentemente con este título">¶</a></h2>
<p>En versiones anteriores de RHEL, la forma predeterminada de configurar la red, era mediante los scripts de red, que se utilizaban en la secuencia de comandos</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>/etc/init.d/network
</pre></div>
</div>
<p>Los archivos eran vistos como Configuración o como modificación de una secuencia de comandos.</p>
<p>Aunque <strong>NM</strong> proporciona el servicio de red por defecto, los desarrolladores de RHEL han trabajado para que los scripts y <strong>NM</strong> cooperen entre sí.</p>
</div>
<div class="section" id="corriendo-el-script-de-red">
<h2>3. Corriendo el script de red<a class="headerlink" href="#corriendo-el-script-de-red" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Correr el script sólo con la utilidad <strong>systemctl</strong> que borrará cualquier variable de entorno existente y asegurará una ejecución límpia.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>systemctl start<span class="p">|</span>stop<span class="p">|</span>restart<span class="p">|</span>status network
</pre></div>
</div>
<p>Tenga en cuenta que <strong>NM</strong> se inicia en primer lugar y <em>/etc/init.d/network</em> chequea con <strong>NM</strong> para evitar la manipulación de conexiones.</p>
<p><strong>NM</strong> está destinada a ser la principal eplicación usando archivos de configuración <em>sysconfig</em> y <em>/etc/init.d/network</em> está destinado a ser secundario.</p>
</div>
<div class="section" id="configuracion-de-red-usando-archivos-sysconfig">
<h2>4. Configuración de red usando archivos <em>sysconfig</em><a class="headerlink" href="#configuracion-de-red-usando-archivos-sysconfig" title="Enlazar permanentemente con este título">¶</a></h2>
<p>El directorio <em>/etc/sysconfig</em> es donde se localizan los scripts y archivos de configuración, la información específica de un interface es almacenada en archivos <em>ifcfg</em> en el directorio <em>/etc/sysconfig/network-scripts/</em>.</p>
<p>El archivo <em>/etc/sysconfig/network</em> es para configuración global.</p>
<p>En <strong>Fedora</strong>, cuando se edita un archivo <em>ifcfg</em>, <strong>NM</strong> no es consciente de ello y debe ser informado del cambio. Si utiliza una de las herramientas para actualizar el perfil de <strong>NM</strong>, no se implementan los cambios hasta que vuelva a conectar dicho perfil, si se ha utilizado un editor, <strong>NM</strong> debe volver a leer los archivos de configuración.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>nmcli connection reload
</pre></div>
</div>
<p>Si queremos recargar un perfil en particular</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>nmcli con load /etc/sysconfig/network-scripts/ifcfg-ifname
</pre></div>
</div>
<p>Los cambios realizados con <strong>nmcli</strong> no requieren juna recarga, pero requieren el nombre dle interfaz asociado</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>nmcli dev disconnect interface-ifname
nmcli con up interface-ifname
</pre></div>
</div>
<p>La secuencia de comandos <em>ifup</em>, es un script genérico que hace algo y después llama a scripts especificos como <em>ifup-ethx</em>, etc…</p>
<p>En el arranque <em>/etc/init.d/network/</em> mira todos los archivos <em>ifcfg</em> y por cada uno que tenga <strong>ONBOOT=yes</strong>, cheque si <strong>NM</strong> está arrancando el dispositivo. El resultado, es que cualquier archivo <em>ifcfg</em> con <strong>ONBOOT=yes</strong>, espera que se inicie, ya seaa por <strong>NM</strong> o por los scripts de inicio, esto asegura que algunos tipos de red antiguas que <strong>NM</strong> no controla (RDSI o modems antiguos) se inicien corrctamente.</p>
</div>
<div class="section" id="configurando-la-red">
<h2>5. Configurando la red<a class="headerlink" href="#configurando-la-red" title="Enlazar permanentemente con este título">¶</a></h2>
<p>A partir de Fedora 20, el GUI de <strong>NM</strong> no es usado por defecto, la configuración de red es parte del <em>control-center</em> de Gnome.</p>
<div class="section" id="configurando-con-cli-usando-ifcfg">
<h3>5.1. Configurando con CLI usando ifcfg<a class="headerlink" href="#configurando-con-cli-usando-ifcfg" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Los archivos de configuración de interfaz controlan los dispositivos de red individualmente, cuando el sistema arranca, mira estos archivos para determinar que interfaces levantar y como configurarlos.</p>
<p>Estos archivos, se llaman <em>ifcfg-name</em>, donde <em>name</em> hace referencia al nombre del dispositivo.</p>
</div>
<div class="section" id="configuracion-estatica">
<h3>5.2. Configuración estática<a class="headerlink" href="#configuracion-estatica" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Para una interface <em>ifcfg-eth0</em> en <em>/etc/sysconfig/network-scripts/</em></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">DEVICE</span><span class="o">=</span>eth0
<span class="nv">BOOTPRO</span><span class="o">=</span>none
<span class="nv">ONBOOT</span><span class="o">=</span>yes
<span class="nv">PREFIX</span><span class="o">=</span><span class="m">24</span>
<span class="nv">IPADDR</span><span class="o">=</span><span class="m">10</span>.1.10.10
</pre></div>
</div>
<p>Opcionalmente, se puede especificar la dirección MAC usando la directiva <em>HWADDR</em>.</p>
<p>Para permitir que un usuario normal pueda levantar o bajar la interface, añadir la directiva</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">USERCTL</span><span class="o">=</span>yes
</pre></div>
</div>
</div>
<div class="section" id="configuracion-dinamica">
<h3>5.3. Configuración dinámica<a class="headerlink" href="#configuracion-dinamica" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Para configurar una interface de forma dinámica.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">DEVICE</span><span class="o">=</span>eth0
<span class="nv">BOOTPRO</span><span class="o">=</span>dhcp
<span class="nv">ONBOOT</span><span class="o">=</span>yes
</pre></div>
</div>
<p>Para enviar un hostname diferente al servidor DHCP, añadir</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">DHCP_HOSTNAME</span><span class="o">=</span>nombre_host
</pre></div>
</div>
<p>Para configurar una interface con un servidor DNS específico</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">PEERDNS</span><span class="o">=</span>no
<span class="nv">DNS1</span><span class="o">=</span>ip_addr
<span class="nv">DNS2</span><span class="o">=</span>ip_addr
</pre></div>
</div>
<p>Esto causa que el de red actualice <em>/etc/resolv.conf</em>    con los servidores DNS especificados.</p>
</div>
<div class="section" id="configurando-la-red-usando-comandos-ip">
<h3>5.4. Configurando la red usando comandos IP<a class="headerlink" href="#configurando-la-red-usando-comandos-ip" title="Enlazar permanentemente con este título">¶</a></h3>
<div class="section" id="asignar-una-direccion">
<h4>5.4.1 Asignar una dirección<a class="headerlink" href="#asignar-una-direccion" title="Enlazar permanentemente con este título">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ip address add <span class="m">10</span>.1.10.10/24 dev eth0
ip addr show dev eth0
</pre></div>
</div>
<p>Los comandos IP dados en la línea de comandos, no persistirán después de un reinicio de sistema.</p>
</div>
<div class="section" id="rutas-estaticas-y-router-por-defecto">
<h4>5.4.2 Rutas estáticas y router por defecto<a class="headerlink" href="#rutas-estaticas-y-router-por-defecto" title="Enlazar permanentemente con este título">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ip route <span class="o">[</span>add <span class="p">|</span> del <span class="p">|</span> change <span class="p">|</span> append <span class="p">|</span> replace<span class="o">]</span> destino
ip route add <span class="m">196</span>.168.1.1/24 via <span class="m">10</span>.0.0.1 <span class="o">[</span>dev ifname<span class="o">]</span>
</pre></div>
</div>
<p>La confiuración de rutas estáticas, puede ser almacenado por interfaz en <em>/etc/sysconfig/network-scripts/route-interface</em></p>
</div>
<div class="section" id="configurar-el-router-por-defecto">
<h4>5.4.3. Configurar el router por defecto<a class="headerlink" href="#configurar-el-router-por-defecto" title="Enlazar permanentemente con este título">¶</a></h4>
<p>La puert de enlace está predeterminada por los scripts de red que se analizan en <em>/etc/sysconfig/</em></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">GATEWAY</span><span class="o">=</span><span class="m">192</span>.168.1.1
</pre></div>
</div>
<p>En entornos de configuración dinámica, la información sobre el gateway, está determinada por DHCP.</p>
</div>
</div>
<div class="section" id="usar-nm-comand-line-tool-nmcli">
<h3>5.5 Usar <strong>NM</strong> Comand Line Tool <strong>nmcli</strong><a class="headerlink" href="#usar-nm-comand-line-tool-nmcli" title="Enlazar permanentemente con este título">¶</a></h3>
<p><strong>nmcli</strong> es usado por usuarios y scripts para controlar NetworkManager.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>nmcli OPTIONS OBJECT <span class="o">{</span><span class="nb">command</span> <span class="p">|</span> help<span class="o">}</span>
</pre></div>
</div>
<div class="topic">
<p class="topic-title first">Parametros</p>
<p>OPTIONS, las mas usadas son:</p>
<ul class="simple">
<li><p>-t, para uso en scripts</p></li>
<li><p>-p, para usuarios</p></li>
<li><p>-h, para obtener ayuda</p></li>
</ul>
<p>OBJECT, lo más usado es:</p>
<ul class="simple">
<li><p>general</p></li>
<li><p>networking</p></li>
<li><p>connection</p></li>
<li><p>device</p></li>
</ul>
</div>
<p>Se puede usar el tabulador para autocompletado del comando, además, es sensible al contexto</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>nmcli <span class="nb">help</span>
nmcli connection <span class="nb">help</span>
</pre></div>
</div>
<div class="section" id="parar-y-arrancar-una-interface-usando-nmcli">
<h4>5.5.1 Parar y arrancar una interface usando nmcli<a class="headerlink" href="#parar-y-arrancar-una-interface-usando-nmcli" title="Enlazar permanentemente con este título">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>nmcli con up id eth0
nmcli dev disconnect eth0
</pre></div>
</div>
<p>Se recomienda el uso de <em>nmcli dev disconnect eth0</em> que <em>nmcli con down id eth0</em>, la desconexión situa el interface en un modo manual.</p>
</div>
<div class="section" id="entendiendo-las-opciones-nmcli">
<h4>5.5.2 Entendiendo las opciones nmcli<a class="headerlink" href="#entendiendo-las-opciones-nmcli" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Muchos comandos <strong>nmcli</strong> son autoexplicativos, pero unos pocos merecen un estudio</p>
<ul class="simple">
<li><p>type (tipo de conexión), cada conexión tiene opciones especificas (tab para ver una lista de ellas)</p></li>
<li><p>con-name, el nombre asignado al perfil de conexión, si no se espera un nombre de conexión, se genera uno como <em>type-ifname[-number]</em>. El nombre de conexión, es el nombre de un perfil de conexión y no debe ser confundido con el nombre de la interfaz.</p></li>
<li><p>id, id puede ser usado en <em>nmcli con</em> para identificar una conexión, se refiere al mismo nombre de conexión que con-name.</p></li>
<li><p>uuid, es una identificación de una conexión asignada por el sistema.</p></li>
</ul>
</div>
<div class="section" id="conectando-una-red-usando-nmcli">
<h4>5.5.3 Conectando una red usando <strong>nmcli</strong><a class="headerlink" href="#conectando-una-red-usando-nmcli" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Para listar las conexiones de red disponibles</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>nmcli con show
</pre></div>
</div>
<p>Añadir una conexión, significa la creación de ujn perfil de configuración que se asigna a un dispositivo. Antes de crear un nuevo perfil, revise los siguientes dispositivos de la siguiente manera.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>nmcli dev status
</pre></div>
</div>
<p>Para añadir una conexión ethernet dinámica con DHCP</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>nmcli connection add <span class="nb">type</span> ethernet con-name <span class="s2">&quot;nom&quot;</span> ifname <span class="s2">&quot;dev&quot;</span>
nmcli con add <span class="nb">type</span> ethernet con-name casa ifname eth0
</pre></div>
</div>
<p>NetworkManager ajusta el parámetro connection.autoconnect a yes y escribe ajustes en <em>/etc/sysconfig/network-scripts/ifcfg-casa</em> donde la directiva ONBOOT se establece a yes.</p>
<p>Tenr en cuenta que los cambios manuales en el archivo ifcfg no serán tenidas en cuenta por NetworkManager hasta que la interface se levante de nuevo.</p>
<p>Para levantar una conexión ethernet</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>nmcli con up casa
</pre></div>
</div>
<p>Para cambiar el hostname enviado a un servidor DHCP, modificar la propiedad dhcp-hostname</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>nmcli con modify casa ipv4.dhcp-hostname <span class="s2">&quot;nombre&quot;</span> ipv6.dhcp-hostname <span class="s2">&quot;nombre&quot;</span>
</pre></div>
</div>
<p>Para ignorar los servidores DNS enviados por DHCP, modificar ignore-auto-DNS</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>nmcli con modify casa ipve.ignore-auto-dns yes
</pre></div>
</div>
<p>Si queremos modificar la conexión dinámica con el editor interactivo</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>nmcli con edit <span class="nb">type</span> ethernet con-name eth0
</pre></div>
</div>
</div>
<div class="section" id="anadiendo-una-conexion-estatica">
<h4>5.5.4 Añadiendo una conexión estática<a class="headerlink" href="#anadiendo-una-conexion-estatica" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Para añadir una conexión ethernet con una configuración estática para IPv4, utilizar el siguiente formato</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>nmcli con add <span class="nb">type</span> ethernet con-name <span class="s2">&quot;nombre&quot;</span> ifname <span class="s2">&quot;interfaz&quot;</span> ip4 dir_ip gw4 dir_ip
nmcli con add <span class="nb">type</span> ethernet con-name <span class="s2">&quot;oficina&quot;</span> ifname eth1 ip4 <span class="m">192</span>.168.1.100/24 gw4 <span class="m">192</span>.168.1.1
</pre></div>
</div>
<p>NetworkManager ajustará su parámetri <em>ipv4.method=manual</em> y connection.autoconnect=yes, también escribira ajustes  en <em>/etc/sysconfig/network-scripts/</em> donde BOOTPROTO=none y ONBOOT=yes.</p>
<p>Si queremos ajustar dos servidores DNS</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>nmcli con mod oficina ipv4.dns <span class="s2">&quot;8.8.8.8 8.8.4.4&quot;</span>
</pre></div>
</div>
<p>Si queremos añadir servidores DNS adicionales, hay que usar el prefijo «+»</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>nmcli con mod oficina +ipv4.dns <span class="s2">&quot;10.10.10.10&quot;</span>
</pre></div>
</div>
<p>Para levantar la nueva conexión ethernet y ver su estado o infomación detallada</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>nmcli con up oficina ifname eth1
nmcli device status
nmcli -p con show oficina
</pre></div>
</div>
<div class="topic">
<p class="topic-title first">Ejemplo</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">$sudo</span> nmcli device status
DISPOSITIVO  TIPO      ESTADO         CONNECTION
eth0         ethernet  conectado      Wired connection <span class="m">1</span>
wlan0        wifi      no disponible  --
lo           loopback  sin gestión    --
</pre></div>
</div>
</div>
<p>Para modificar una conexión ethernet estática</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>nmcli con mod oficina ipv4.address <span class="s2">&quot;192.168.1.101&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="configurar-rutas-estaticas">
<h3>5.6 Configurar rutas estáticas<a class="headerlink" href="#configurar-rutas-estaticas" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Para configurar una ruta estática en una conexión ethernet existente</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>nmcli con mod eth0 +ipv4.routes <span class="s2">&quot;192.168.122.0/24 10.10.10.1&quot;</span>
</pre></div>
</div>
<p>Esto, dirige el tráfico de la red 192.168.122.0 al gateway 10.10.10.1</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ip-cheatsheet.html" class="btn btn-neutral float-right" title="Comandos para la gestión de red" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Redes, Wireshark y entorno Ibercom" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Kike G

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>